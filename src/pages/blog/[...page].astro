---
// 基本構造は tech と blog の [...page].astro 共通
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import PostCard from "../../components/PostCard.astro";
import Pagenation from "../../components/Pagenation.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";

import type { GetStaticPathsOptions } from "astro";
export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
  );

  return paginate(posts, { pageSize: 8 });
}

const { page } = Astro.props;
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <ul class="grid grid-cols-1 md:grid-rows-2 md:grid-cols-4 gap-2 list-none px-6 md:px-36">
    {page.data.map((post) => <PostCard post={post}/>)}
  </ul>
  <Pagenation page={page}/>
</BaseLayout>
