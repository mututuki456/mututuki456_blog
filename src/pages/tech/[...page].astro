---
// 基本構造は tech と blog の [...page].astro 共通
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import PostCard from "../../components/PostCard.astro";
import Pagenation from "../../components/Pagenation.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";

import type { GetStaticPathsOptions } from "astro";
export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const posts = (await getCollection("tech")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
  );

  return paginate(posts, { pageSize: 8 });
}

const { page } = Astro.props;
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
<!--
  <div class="px-24 mb-4">
    <div class="flex border-b border-gray-200">
      <span class="px-6 py-3 font-bold text-gray-500 transition-colors"
        >Tech</span
      >
      <button
        id="tab-btn-new"
        class="tab-btn active px-6 py-3 font-bold text-gray-500 hover:text-accent transition-colors border-b-2 border-transparent focus:border-accent"
        data-target="content-new"
      >
        新着記事
      </button>
      <button
        id="tab-btn-popular"
        class="tab-btn px-6 py-3 font-bold text-gray-500 hover:text-accent transition-colors border-b-2 border-transparent focus:border-accent"
        data-target="content-popular"
      >
        人気記事
      </button>
    </div>
  </div>
  <div class="mb-8 text-center">
    <h1 class="text-3xl font-bold mb-2 flex items-center justify-center gap-3">
      Tech
    </h1>
  </div>
-->

  <ul class="grid grid-cols-1 md:grid-rows-2 md:grid-cols-4 gap-2 list-none px-6 md:px-36">
    {page.data.map((post) => <PostCard post={post} />)}
  </ul>

  <Pagenation page={page} />
</BaseLayout>
