---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import GridBackground from "../components/GridBackground.astro";

import Sidebar from "../components/Sidebar.astro";
import NoticeBoard from "../components/NoticeBoard.astro";
import Carousel from "../components/Carousel.astro";

import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";

const techPosts = await getCollection("tech");
const blogPosts = await getCollection("blog");

const pickupPosts = [
  ...techPosts.filter((post) => post.data.pickup === true),
  ...blogPosts.filter((post) => post.data.pickup === true),
];

pickupPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

// もし数が多すぎる場合は以下を使って件数を絞る
// const featuredPosts = pickupPosts.slice(0, 10);
---

<!doctype html>
<html lang="ja">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION}/>
  </head>
  <body class="antialiased flex flex-col min-h-screen">
    <Header/>
    <GridBackground/>

    <main class="w-full mx-auto pt-6">
      <div class="px-10 py-10 background shadow-[inset_0_5px_5px_0_rgba(0,0,0,0.2)]">
        <h2 class="text-center text-xl md:text-2xl font-extrabold tracking-tight mb-4">
          {SITE_TITLE}
        </h2>
        <p class="text-center text-md text-gray-600 mx-auto px-4">
          日々の学びや技術的な知見をアウトプットするブログです。<br/>
          ゲーム制作や小説執筆についても不定期に更新中。
        </p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-4 gap-4">
        <article class="lg:col-span-3 pl-8 pr-4 py-6">
          <section>
            <NoticeBoard/>
            <Carousel posts={pickupPosts}/>
          </section>
        </article>

        <div class="py-6 lg:col-span-1">
          <Sidebar/>
        </div>
      </div>
    </main>

    <Footer/>
  </body>
</html>

<style>
.background {
  background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE5MjAgMzAwIj4gPGRlZnM+IDxyYWRpYWxHcmFkaWVudCBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9Ijk2OS4yMDUiIGN5PSIxNTAuOTczIiByPSI5NjAiIGlkPSJncmFkaWVudC0wIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KC0wLjA0NzM1NywgMC45NDUxNDQsIC0xLjc3NTc3NCwgLTAuMDg4OTc2LCAxMjczLjg0NjcxOCwgLTc1Mi42MzMzNjkpIiBzcHJlYWRNZXRob2Q9InBhZCI+IDxzdG9wIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IHJnYigyNTIsIDIwMywgMTQ0KTsiLz4gPHN0b3Agb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjogcmdiKDIxMywgMTI2LCAyMzUpOyIvPiA8L3JhZGlhbEdyYWRpZW50PiA8L2RlZnM+IDxyZWN0IHdpZHRoPSIxOTIwIiBoZWlnaHQ9IjMwMCIgc3R5bGU9InN0cm9rZS13aWR0aDogMTsgZmlsbC1ydWxlOiBub256ZXJvOyBmaWxsOiB1cmwoJnF1b3Q7I2dyYWRpZW50LTAmcXVvdDspOyIgeD0iMCIgeT0iMCIvPiA8cGF0aCBkPSJNIDMyOC44MSAxNS43NyBDIDMyMC42MiAxNS43NyAzMTMuOTkgOS4xMzQgMzEzLjk5IDAuOTQ4IEMgMzEzLjk5IC03LjIzOCAzMjAuNjIgLTEzLjg3NCAzMjguODEgLTEzLjg3NCBMIDQ3Ny4wMyAtMTMuODc0IEMgNDg1LjIxIC0xMy44NzQgNDkxLjg1IC03LjIzOCA0OTEuODUgMC45NDggQyA0OTEuODUgOS4xMzQgNDg1LjIxIDE1Ljc3IDQ3Ny4wMyAxNS43NyBMIDQxNy43NCAxNS43NyBDIDQwOS41NSAxNS43NyA0MDIuOTIgMjIuNDA1IDQwMi45MiAzMC41OTEgQyA0MDIuOTIgMzguNzc3IDQwOS41NSA0NS40MTMgNDE3Ljc0IDQ1LjQxMyBMIDQ1NC43OSA0NS40MTMgQyA0NjIuOTggNDUuNDEzIDQ2OS42MSA1Mi4wNDkgNDY5LjYxIDYwLjIzNSBDIDQ2OS42MSA2OC40MjEgNDYyLjk4IDc1LjA1NyA0NTQuNzkgNzUuMDU3IEwgMzUxLjA0IDc1LjA1NyBDIDM0Mi44NSA3NS4wNTcgMzM2LjIyIDgxLjY5MiAzMzYuMjIgODkuODc5IEMgMzM2LjIyIDk4LjA2NSAzNDIuODUgMTA0LjcgMzUxLjA0IDEwNC43IEwgNDAyLjkyIDEwNC43IEMgNDExLjEgMTA0LjcgNDE3Ljc0IDExMS4zMzYgNDE3Ljc0IDExOS41MjIgQyA0MTcuNzQgMTI3LjcwOCA0MTEuMSAxMzQuMzQ0IDQwMi45MiAxMzQuMzQ0IEwgMjg0LjM0IDEzNC4zNDQgQyAyNzYuMTUgMTM0LjM0NCAyNjkuNTIgMTI3LjcwOCAyNjkuNTIgMTE5LjUyMiBDIDI2OS41MiAxMTEuMzM2IDI3Ni4xNSAxMDQuNyAyODQuMzQgMTA0LjcgTCAyOTEuNzUgMTA0LjcgQyAyOTkuOTQgMTA0LjcgMzA2LjU3IDk4LjA2NSAzMDYuNTcgODkuODc5IEMgMzA2LjU3IDgxLjY5MiAyOTkuOTQgNzUuMDU3IDI5MS43NSA3NS4wNTcgTCAyNDcuMjkgNzUuMDU3IEMgMjM5LjEgNzUuMDU3IDIzMi40NiA2OC40MjEgMjMyLjQ2IDYwLjIzNSBDIDIzMi40NiA1Mi4wNDkgMjM5LjEgNDUuNDEzIDI0Ny4yOSA0NS40MTMgTCAzNTguNDUgNDUuNDEzIEMgMzY2LjY0IDQ1LjQxMyAzNzMuMjcgMzguNzc3IDM3My4yNyAzMC41OTEgQyAzNzMuMjcgMjIuNDA1IDM2Ni42NCAxNS43NyAzNTguNDUgMTUuNzcgTCAzMjguODEgMTUuNzcgWiIgc3R5bGU9ImZpbGw6IHJnYigyNTUsIDI1NSwgMjU1KTsgc3Ryb2tlLXdpZHRoOiAxOyIvPiA8ZWxsaXBzZSBzdHlsZT0ic3Ryb2tlLXdpZHRoOiAxOyBmaWxsOiByZ2IoMjU1LCAyNTUsIDI1NSk7IiBjeD0iMjQxLjQ1IiBjeT0iMTkxLjk3MiIgcng9IjE4LjQiIHJ5PSIxOC40Ii8+IDxlbGxpcHNlIHN0eWxlPSJzdHJva2Utd2lkdGg6IDE7IGZpbGw6IHJnYigyNTUsIDI1NSwgMjU1KTsiIGN4PSIyMDMuODEiIGN5PSI1OS42NzEiIHJ4PSIxNC44MjIiIHJ5PSIxNC44MjIiLz4gPHBhdGggZD0iTSAxOTEzLjgyIDI4LjQ4OSBDIDE5MjcuMDUgMjguNDg5IDE5MzcuNzkgMzkuMjIyIDE5MzcuNzkgNTIuNDYxIEMgMTkzNy43OSA2NS43MDEgMTkyNy4wNSA3Ni40MzMgMTkxMy44MiA3Ni40MzMgTCAxNzQ2LjAyIDc2LjQzMyBDIDE3MzIuNzggNzYuNDMzIDE3MjIuMDQgODcuMTY1IDE3MjIuMDQgMTAwLjQwNSBDIDE3MjIuMDQgMTEzLjY0NCAxNzMyLjc4IDEyNC4zNzYgMTc0Ni4wMiAxMjQuMzc2IEwgMTgyOS45MyAxMjQuMzc2IEMgMTg0My4xNyAxMjQuMzc2IDE4NTMuOTEgMTM1LjEwOSAxODUzLjkxIDE0OC4zNDggQyAxODUzLjkxIDE2MS41ODggMTg0My4xNyAxNzIuMzIgMTgyOS45MyAxNzIuMzIgTCAxNjM4LjE2IDE3Mi4zMiBDIDE2MjQuOTMgMTcyLjMyIDE2MTQuMTkgMTYxLjU4OCAxNjE0LjE5IDE0OC4zNDggQyAxNjE0LjE5IDEzNS4xMDkgMTYyNC45MyAxMjQuMzc2IDE2MzguMTYgMTI0LjM3NiBMIDE2NTAuMTQgMTI0LjM3NiBDIDE2NjMuMzcgMTI0LjM3NiAxNjc0LjExIDExMy42NDQgMTY3NC4xMSAxMDAuNDA1IEMgMTY3NC4xMSA4Ny4xNjUgMTY2My4zNyA3Ni40MzMgMTY1MC4xNCA3Ni40MzMgTCAxNTc4LjIzIDc2LjQzMyBDIDE1NjQuOTkgNzYuNDMzIDE1NTQuMjUgNjUuNzAxIDE1NTQuMjUgNTIuNDYxIEMgMTU1NC4yNSAzOS4yMjIgMTU2NC45OSAyOC40ODkgMTU3OC4yMyAyOC40ODkgTCAxNzU4LjAxIDI4LjQ4OSBDIDE3NzEuMjQgMjguNDg5IDE3ODEuOTkgMTcuNzU3IDE3ODEuOTkgNC41MTggQyAxNzgxLjk5IC04LjcyMiAxNzcxLjI0IC0xOS40NTQgMTc1OC4wMSAtMTkuNDU0IEwgMTg1My45MSAtMTkuNDU0IEMgMTg0MC42NyAtMTkuNDU0IDE4MjkuOTMgLTguNzIyIDE4MjkuOTMgNC41MTggQyAxODI5LjkzIDE3Ljc1NyAxODQwLjY3IDI4LjQ4OSAxODUzLjkxIDI4LjQ4OSBMIDE5MTMuODIgMjguNDg5IFogTSAxNzQ2LjAyIDEyNC4zNzYgQyAxNzQ2LjAyIDEyNC4zNzYgMTc0Ni4wMiAxMjQuMzc2IDE3NDYuMDIgMTI0LjM3NiBaIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOiAxOyBmaWxsOiByZ2IoMjU1LCAyNTUsIDI1NSk7Ii8+IDxlbGxpcHNlIHN0eWxlPSJzdHJva2Utd2lkdGg6IDE7IGZpbGw6IHJnYigyNTUsIDI1NSwgMjU1KTsiIGN4PSIxNTA4LjY2IiBjeT0iNTIuNDcxIiByeD0iMjMuOTcyIiByeT0iMjMuOTcyIi8+IDxwYXRoIGQ9Ik0gMTM4OS4xNiAyMDEuNDUzIEMgMTM4MS4wMiAyMDEuNDUzIDEzNzQuNDIgMTk0Ljg1MyAxMzc0LjQyIDE4Ni43MTIgQyAxMzc0LjQyIDE3OC41NzEgMTM4MS4wMiAxNzEuOTcyIDEzODkuMTYgMTcxLjk3MiBMIDE1MDcuMDggMTcxLjk3MiBDIDE1MTUuMjUgMTcxLjk3MiAxNTIxLjgyIDE3OC41NzEgMTUyMS44MiAxODYuNzEyIEMgMTUyMS44MiAxOTQuODUzIDE1MTUuMjUgMjAxLjQ1MyAxNTA3LjA4IDIwMS40NTMgTCAxNDQ3LjMyIDIwMS40NTMgQyAxNDQxIDIwMy4xMTEgMTQzNi4zMyAyMDguODY3IDE0MzYuMzMgMjE1LjcxMiBDIDE0MzYuMzMgMjIyLjU1OSAxNDQxIDIyOC4zMTUgMTQ0Ny4zMiAyMjkuOTcyIEwgMTQ5Mi4zNCAyMjkuOTcyIEMgMTUwMC41MSAyMjkuOTcyIDE1MDcuMDggMjM2LjU3MSAxNTA3LjA4IDI0NC43MTIgQyAxNTA3LjA4IDI1Mi44NTQgMTUwMC41MSAyNTkuNDUzIDE0OTIuMzQgMjU5LjQ1MyBMIDE0OTAuMDcgMjU5LjQ1MyBDIDE0ODMuNzUgMjYxLjExMSAxNDc5LjA4IDI2Ni44NjcgMTQ3OS4wOCAyNzMuNzEyIEMgMTQ3OS4wOCAyODAuNTU5IDE0ODMuNzUgMjg2LjMxNSAxNDkwLjA3IDI4Ny45NzIgTCAxNjIzLjYxIDI4Ny45NzIgQyAxNjMxLjc3IDI4Ny45NzIgMTYzOC4zNSAyOTQuNTcyIDE2MzguMzUgMzAyLjcxMyBDIDE2MzguMzUgMzEwLjg1NCAxNjMxLjc3IDMxNy40NTMgMTYyMy42MSAzMTcuNDUzIEwgMTQxNy4yNSAzMTcuNDUzIEMgMTQwOS4xIDMxNy40NTMgMTQwMi41MSAzMTAuODU0IDE0MDIuNTEgMzAyLjcxMyBDIDE0MDIuNTEgMjk0LjU3MiAxNDA5LjEgMjg3Ljk3MiAxNDE3LjI1IDI4Ny45NzIgTCAxNDM4LjYgMjg3Ljk3MiBDIDE0NDQuOTQgMjg2LjMxNSAxNDQ5LjYgMjgwLjU1OSAxNDQ5LjYgMjczLjcxMiBDIDE0NDkuNiAyNjYuODY3IDE0NDQuOTUgMjYxLjExMSAxNDM4LjYxIDI1OS40NTMgTCAxMzQ0Ljk0IDI1OS40NTMgQyAxMzM2LjggMjU5LjQ1MyAxMzMwLjIgMjUyLjg1NCAxMzMwLjIgMjQ0LjcxMiBDIDEzMzAuMiAyMzYuNTcxIDEzMzYuOCAyMjkuOTcyIDEzNDQuOTQgMjI5Ljk3MiBMIDEzOTUuODUgMjI5Ljk3MiBDIDE0MDIuMTkgMjI4LjMxNSAxNDA2Ljg1IDIyMi41NTkgMTQwNi44NSAyMTUuNzEyIEMgMTQwNi44NSAyMDguODY3IDE0MDIuMiAyMDMuMTExIDEzOTUuODYgMjAxLjQ1MyBMIDEzODkuMTYgMjAxLjQ1MyBaIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOiAxOyBmaWxsOiByZ2IoMjU1LCAyNTUsIDI1NSk7Ii8+IDxwYXRoIGQ9Ik0gLTE4LjU4IDI3OC43OTkgQyAtMjguNDcgMjc4Ljc5OSAtMzYuNSAyNzAuNzc5IC0zNi41IDI2MC44ODYgQyAtMzYuNSAyNTAuOTkyIC0yOC40NyAyNDIuOTcyIC0xOC41OCAyNDIuOTcyIEwgNDQuMTQgMjQyLjk3MiBDIDUxLjM5IDI0MC42ODMgNTYuNjYgMjMzLjg5OSA1Ni42NiAyMjUuODg2IEMgNTYuNjYgMjE3Ljg3MSA1MS4zOSAyMTEuMDg2IDQ0LjEzIDIwOC43OTggTCAzNS4xNiAyMDguNzk4IEMgMjUuMjYgMjA4Ljc5OCAxNy4yNCAyMDAuNzc5IDE3LjI0IDE5MC44ODUgQyAxNy4yNCAxODAuOTkxIDI1LjI2IDE3Mi45NzIgMzUuMTYgMTcyLjk3MiBMIDE3OC40NyAxNzIuOTcyIEMgMTg4LjM2IDE3Mi45NzIgMTk2LjM4IDE4MC45OTEgMTk2LjM4IDE5MC44ODUgQyAxOTYuMzggMjAwLjc3OSAxODguMzYgMjA4Ljc5OCAxNzguNDcgMjA4Ljc5OCBMIDEwNSAyMDguNzk4IEMgOTcuNzQgMjExLjA4NiA5Mi40OCAyMTcuODcxIDkyLjQ4IDIyNS44ODYgQyA5Mi40OCAyMzMuODk5IDk3Ljc0IDI0MC42ODMgMTA1IDI0Mi45NzIgTCAxNjAuNTUgMjQyLjk3MiBDIDE3MC40NSAyNDIuOTcyIDE3OC40NyAyNTAuOTkyIDE3OC40NyAyNjAuODg2IEMgMTc4LjQ3IDI3MC43NzkgMTcwLjQ1IDI3OC43OTkgMTYwLjU1IDI3OC43OTkgTCAxNTYuOTUgMjc4Ljc5OSBDIDE0OS42OSAyODEuMDg4IDE0NC40MyAyODcuODczIDE0NC40MyAyOTUuODg2IEMgMTQ0LjQzIDMwNS43NzkgMTUyLjQ1IDMxMy43OTkgMTYyLjM0IDMxMy43OTkgTCA5MC42OSAzMTMuNzk5IEMgMTAwLjU4IDMxMy43OTkgMTA4LjYgMzA1Ljc3OSAxMDguNiAyOTUuODg2IEMgMTA4LjYgMjg3Ljg3MyAxMDMuMzQgMjgxLjA4OCA5Ni4wOSAyNzguNzk5IEwgLTE4LjU4IDI3OC43OTkgWiBNIDE2Mi4zNCAzMTMuNzk5IEMgMTYyLjM0IDMxMy43OTkgMTYyLjM0IDMxMy43OTkgMTYyLjM0IDMxMy43OTkgWiIgc3R5bGU9InN0cm9rZS13aWR0aDogMTsgZmlsbDogcmdiKDI1NSwgMjU1LCAyNTUpOyIvPiA8ZWxsaXBzZSBzdHlsZT0ic3Ryb2tlLXdpZHRoOiAxOyBmaWxsOiByZ2IoMjU1LCAyNTUsIDI1NSk7IiBjeD0iMTU0MC44NSIgY3k9IjI0NS45NzIiIHJ4PSIxNC43NSIgcnk9IjE0Ljc1Ii8+PC9zdmc+");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}
</style>